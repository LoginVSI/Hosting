networks:
  front:
    driver: overlay
  messaging:
    driver: overlay
secrets:
  ADMIN_PASSWORD:
    external: true
  ENGINE_SECRET:
    external: true
  EVENTLOGGER_SECRET:
    external: true
  LAUNCHER_SECRET:
    external: true
  USER_PASSWORD:
    external: true
  VSI_SSL_CERTIFICATE:
    file: ${SSL_CERTIFICATE_PATH}
  VSI_SSL_CERTIFICATE_KEY:
    file: ${SSL_CERTIFICATE_KEY_PATH}
  VSI_SSL_CERTIFICATE_KEY_PASSWORD:
    external: true
services:
  accounts:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=accounts;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: accounts
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/accounts:3.1.9
    networks:
    - front
    - messaging
    restart: always
  applications:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=applications;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: applications
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/applications:3.1.13
    networks:
    - front
    - messaging
    restart: always
  backtrackerworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/backtrackerworker:3.1.7
    networks:
    - front
    - messaging
    restart: always
  chartsapi:
    deploy:
      restart_policy:
        condition: any
    environment:
      Hosting__VirtualDirectory: chartsApi
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Defauly: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 10
      Retry__RetryDelay: 10
      Services__SessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionmetricstatistics
      Services__StatisticsUrl: http://statistics/statistics
    image: loginvsi/chartsapi:3.1.1
    networks:
    - front
    - messaging
    restart: always
  cleanupworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/cleanupworker:3.1.6
    networks:
    - front
    - messaging
    restart: always
  contentdelivery:
    deploy:
      restart_policy:
        condition: any
    environment:
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: contentDelivery
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
    image: loginvsi/contentdelivery:3.1.58
    networks:
    - front
    - messaging
    restart: always
    secrets:
    - LAUNCHER_SECRET
    - ENGINE_SECRET
    - EVENTLOGGER_SECRET
  dashboardapi:
    deploy:
      restart_policy:
        condition: any
    environment:
      Hosting__VirtualDirectory: dashboardApi
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Defauly: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 10
      Retry__RetryDelay: 10
      Services__EnvironmentsUrl: http://environments/environments
      Services__SessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__SessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__VirtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/dashboardapi:3.1.13
    networks:
    - front
    - messaging
    restart: always
  environments:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=environments;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: environments
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/environments:3.1.18
    networks:
    - front
    - messaging
    restart: always
  eventnotificationsworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/eventnotificationsworker:3.1.11
    networks:
    - front
    - messaging
    restart: always
  eventshub:
    deploy:
      restart_policy:
        condition: any
    environment:
      Hosting__VirtualDirectory: eventsHub
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/eventshub:3.1.0
    networks:
    - front
    - messaging
    restart: always
  functionalevents:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=functionalEvents;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: functionalEvents
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/functionalevents:3.1.12
    networks:
    - front
    - messaging
    restart: always
  functionaleventsworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/functionaleventsworker:3.1.12
    networks:
    - front
    - messaging
    restart: always
  gateway:
    deploy:
      restart_policy:
        condition: any
    image: loginvsi/gateway_loginpi:3.1.14
    networks:
    - front
    - messaging
    ports:
    - ${GATEWAY_PORT}:443
    - 80:80
    restart: always
    secrets:
    - VSI_SSL_CERTIFICATE
    - VSI_SSL_CERTIFICATE_KEY
    - VSI_SSL_CERTIFICATE_KEY_PASSWORD
  identityserver:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: Server=identityserverDb;Database=identityServer;Username=postgres;
      DB__DbType: PostgreSQL
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: identityserver
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      Version__Number: '3.5.9'
    image: loginvsi/identityserver:3.1.7
    networks:
    - front
    - databases
    restart: always
    secrets:
    - ADMIN_PASSWORD
    - USER_PASSWORD
    - LAUNCHER_SECRET
    - ENGINE_SECRET
    - EVENTLOGGER_SECRET
  identityserverDb:
    deploy:
      restart_policy:
        condition: any
    image: postgres:9
    networks:
    - databases
    restart: always
    volumes:
    - ${DB_ROOT}/identityserverDb:/var/lib/postgresql/data
  launchers:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=launchers;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: launchers
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/launchers:3.1.8
    networks:
    - front
    - messaging
    restart: always
  licensing:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=licensing;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: licensing
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/licensing:3.1.5
    networks:
    - front
    - messaging
    restart: always
  licensingworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/licensingworker:3.1.3
    networks:
    - front
    - messaging
    restart: always
  loginscheduleworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/loginscheduleworker:3.1.16
    networks:
    - front
    - messaging
    restart: always
  messagebroker:
    deploy:
      restart_policy:
        condition: any
    hostname: rabbitMQ-${COMPOSE_PROJECT_NAME}
    image: rabbitmq:3.6.12-management
    networks:
    - messaging
    restart: always
    volumes:
    - ${DB_ROOT}/messagebroker:/var/lib/rabbitmq/mnesia
  notifications:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=notifications;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: notifications
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/notifications:3.1.4
    networks:
    - front
    - messaging
    restart: always
  pdfconverter:
    environment:
      WEAVER_ATHENA_CMD: athenapdf --delay 2000 -S
    image: loginvsi/pdfconverterapi:latest
    networks:
    - front
  portainer:
    command: -d /data -H unix:///var/run/docker.sock --admin-password-file /run/secrets/ADMIN_PASSWORD
    deploy:
      mode: replicated
      replicas: 1
      restart_policy:
        condition: any
    image: portainer/portainer:latest
    networks:
    - front
    secrets:
    - ADMIN_PASSWORD
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
  rawdataexports:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=rawDataExports;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: rawDataExports
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/rawdataexports:3.1.2
    networks:
    - front
    - messaging
    restart: always
  rawdataexportsworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/rawdataexportsworker:3.1.4
    networks:
    - front
    - messaging
    restart: always
  reports:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=reports;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: reports
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/reports:3.1.9
    networks:
    - front
    - messaging
    restart: always
  reportschedules:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=reportSchedules;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: reportSchedules
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/reportschedules:3.1.11
    networks:
    - front
    - messaging
    restart: always
  reportsworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/reportsworker:3.1.8
    networks:
    - front
    - messaging
    restart: always
  scriptworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/scriptworker:3.1.14
    networks:
    - front
    - messaging
    restart: always
  sessionmetrics:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=sessionMetrics;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: sessionMetrics
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/sessionmetrics:3.1.7
    networks:
    - front
    - messaging
    restart: always
  sessionmetricstatistics:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=sessionMetricStatistics;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: sessionMetricStatistics
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/sessionmetricstatistics:3.1.4
    networks:
    - front
    - messaging
    restart: always
  sessionrequests:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=sessionRequests;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: sessionRequests
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/sessionrequests:3.1.12
    networks:
    - front
    - messaging
    restart: always
  sessionworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/sessionworker:3.1.16
    networks:
    - front
    - messaging
    restart: always
  statistics:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=statistics;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: statistics
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/statistics:3.1.9
    networks:
    - front
    - messaging
    restart: always
  statisticworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/statisticworker:3.1.3
    networks:
    - front
    - messaging
    restart: always
  systemconfiguration:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=systemConfiguration;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: systemConfiguration
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/systemconfiguration:3.1.12
    networks:
    - front
    - messaging
    restart: always
  technicalevents:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=technicalEvents;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: technicalEvents
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/technicalevents:3.1.0
    networks:
    - front
    - messaging
    restart: always
  timeoutworker:
    deploy:
      restart_policy:
        condition: any
    environment:
      IdentityProvider__Authority: http://identityserver/identityserver
      MessageBroker__Hostname: messagebroker
      Services__accountsUrl: http://accounts/accounts
      Services__applicationsUrl: http://applications/applications
      Services__environmentsUrl: http://environments/environments
      Services__functionalEventsUrl: http://functionalevents/functionalEvents
      Services__launchersUrl: http://launchers/launchers
      Services__licensingUrl: http://licensing/licensing
      Services__notificationsUrl: http://notifications/notifications
      Services__rawDataExportsUrl: http://rawdataexports/rawDataExports
      Services__reportSchedulesUrl: http://reportschedules/reportSchedules
      Services__reportsUrl: http://reports/reports
      Services__sessionMetricStatisticsUrl: http://sessionmetricstatistics/sessionMetricStatistics
      Services__sessionMetricsUrl: http://sessionmetrics/sessionMetrics
      Services__sessionRequestsUrl: http://sessionrequests/sessionRequests
      Services__statisticsUrl: http://statistics/statistics
      Services__systemConfigurationUrl: http://systemconfiguration/systemConfiguration
      Services__technicalEventsUrl: http://technicalevents/technicalEvents
      Services__virtualUserResultsUrl: http://virtualuserresults/virtualUserResults
    image: loginvsi/timeoutworker:3.1.14
    networks:
    - front
    - messaging
    restart: always
  ui:
    deploy:
      restart_policy:
        condition: any
    healthcheck:
      interval: 1m
      retries: 3
      test: wget -q http://localhost || exit 1
      timeout: 2s
    image: loginvsi/ui_loginpi:3.1.51
    networks:
    - front
    restart: always
  virtualuserresults:
    deploy:
      restart_policy:
        condition: any
    environment:
      Appliance_Version: 'a062'
      DB__ConnectionString: ${CONNECTION_STRING};Database=virtualUserResults;
      DB__DbType: ${DB_TYPE}
      Hosting__HostUrls: ${ALLOWED_CLIENT_URLS}
      Hosting__VirtualDirectory: virtualUserResults
      IdentityProvider__Authority: http://identityserver/identityserver
      Logging__LogLevel__Default: Warning
      Logging__LogLevel__Microsoft: Warning
      Logging__LogLevel__Microsoft.AspNetCore.Authentication: Warning
      Logging__LogLevel__System: Warning
      MessageBroker__Hostname: messagebroker
      Retry__ConnectDelay: 10
      Retry__MaxAttempts: 50
      Retry__RetryDelay: 10
      SystemConfiguration__AllowUntrustedCertificates: "true"
      Version__Number: '3.5.9'
    image: loginvsi/virtualuserresults:3.1.16
    networks:
    - front
    - messaging
    restart: always
version: "3.4"

